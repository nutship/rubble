### 1. 信号

信号是进程间通信的一种方式，就行为而言它是一种软件形式的异常。

??? hint "Linux signals"

    <img src="../img/man7signal.png" width=650>

内核为每个进程在 pending 位向量维护待处理信号集合，在 blocked 位向量 (mask) 维护被阻塞的信号集合。内核把一个信号传给一个进程由两步组成:

-   内核通过更新 pending 向量，发送信号。原因可能出于:
    -   内核检测到一个系统 event，例如除零错误 或 子进程终止
    -   其他进程调用了 `kill`，显式要求内核发送信号给目的进程
-   进程清除 pending 的对应位，表示接收信号，然后进程可以选择忽略或捕获 (执行信号处理程序)。

任何时刻，同一类型只可能有一个待处理 (pending) 信号，同类型的其他信号会被丢弃；进程可以选择性地阻塞接收某种信号。

### 2. 发送信号

Unix 提供了很多发送信号的机制，这些机制都基于进程组这个概念。

#### (1). 进程组

每个进程都只属于一个进程组，进程组由一个正整数 ID 标识。

```C
#include <unistd.h>

pid_t getpgrp(void);
int setpgid(pid_t pid, pid_t pgid);
```

<font class="u_1">

-   `getpgrp`:&ensp; 返回当前进程的进程组 ID
-   `setpgid`:&ensp; 默认情况下，子进程和它的父进程属于同一个组，此函数将 `pid` 的进程组号改为 `pgid`
    -   `pid=0` 表示 `pid =` 调用进程
    -   `pgid=0` 表示用 `pid` 指定的进程作为进程组 ID

</font>

<!-- Unix Shell -->
